name: Weekly Flair

on:
  schedule:
    - cron: "10 0 * * 1"   # Lunes 00:10 UTC (08:10 en Madrid durante verano, 01:10 ajustar si quieres)
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: python -m pip install --upgrade pip praw tzdata
      - name: Run bot
        env:
          SUBREDDIT: RoccoSiffrediPorn
          DRY_RUN: "true"                    # c√°mbialo a "false" cuando verifiques
          REDDIT_CLIENT_ID: ${{ secrets.REDDIT_CLIENT_ID }}
          REDDIT_CLIENT_SECRET: ${{ secrets.REDDIT_CLIENT_SECRET }}
          REDDIT_USERNAME: ${{ secrets.REDDIT_USERNAME }}   # WeeklyFlairBot
          REDDIT_PASSWORD: ${{ secrets.REDDIT_PASSWORD }}
          REDDIT_USER_AGENT: "weekly-flair-bot by u/WeeklyFlairBot v1"
        run: python weekly_flair_bot.py
